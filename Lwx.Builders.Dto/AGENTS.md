# AGENTS — Lwx.Builders.Dto

AI agent context for the DTO source generator project.

## Project Purpose

Roslyn incremental source generator that produces JSON-friendly DTO partial implementations with backing fields or dictionary storage.

## Key Files

- `DtoGenerator.cs` — Main generator entry point
- `Processors/LwxDtoTypeProcessor.cs` — Per-type processing logic
- `Attributes/` — Embedded attribute source files
- `GeneratorUtils.cs` — Shared utilities

## Architecture

1. Attributes are embedded and emitted via `PostInitializationOutput`
2. Generator collects `[LwxDto]` annotated types
3. Processor validates and generates partial implementations
4. Two storage modes: `Normal` (backing fields), `Dictionary`

## Diagnostics

| Code | Description |
|------|-------------|
| LWX003 | Unsupported type — needs converter |
| LWX004 | Enum missing `[JsonPropertyName]` |
| LWX005 | Property missing attribute |
| LWX006 | Fields not allowed |
| LWX007 | Consider `DateTimeOffset` |

## Development Commands

```bash
# Build
dotnet build ./Lwx.Builders.Dto/Lwx.Builders.Dto.csproj

# Test
dotnet test ./Lwx.Builders.Dto.Tests/Lwx.Builders.Dto.Tests.csproj --no-build
```

## Coding Rules

- Use `$$"""` raw templates for generated code
- Apply `.FixIndent(levels)` at inclusion sites
- File-scoped namespaces in generated files
- Never modify `// <auto-generated/>` files
- Primary constructors for processors

## Context History

- DTO processing moved from MicroService to dedicated project
- Added `[LwxDtoIgnore]` for excluding properties
- Two storage modes: Normal and Dictionary
- Enum properties get `[JsonStringEnumConverter]`
